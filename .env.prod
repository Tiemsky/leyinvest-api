# ============================================
# APPLICATION
# ============================================
APP_NAME="LeyInvest"
APP_ENV=production
APP_KEY=base64:VOTRE_CLE_ICI_A_GENERER  # ← php artisan key:generate
APP_DEBUG=false
APP_URL=https://api.leyinvest.com

# Timezone
APP_TIMEZONE=UTC
APP_LOCALE=fr
APP_FALLBACK_LOCALE=fr
APP_FAKER_LOCALE=fr_FR

# ============================================
# TRAEFIK ROUTING (Important pour Dokploy)
# ============================================
APP_DOMAIN=api.leyinvest.com

# ============================================
# FRONTEND URLS & CORS
# ============================================
FRONTEND_URL=https://app.leyinvest.com
FRONTEND_URL_PROD=https://app.leyinvest.com
FRONTEND_URL_LOCAL=http://localhost:3000

# Liste blanche des origines autorisées (CORS)
ALLOWED_FRONTEND_URLS=https://app.leyinvest.com,https://www.app.leyinvest.com,https://staging.app.leyinvest.com

# ============================================
# SANCTUM & SESSION CONFIG
# ============================================
SANCTUM_STATEFUL_DOMAINS=app.leyinvest.com,staging.app.leyinvest.com
SESSION_DOMAIN=.leyinvest.com  # ← Avec point pour sous-domaines

# ============================================
# DATABASE (PostgreSQL)
# ============================================
DB_CONNECTION=pgsql
DB_HOST=postgres  # ← Nom du service Docker
DB_PORT=5432
DB_DATABASE=leyinvest_prod  # ← Changez selon votre base
DB_USERNAME=leyinvest_user   # ← Changez selon votre user
DB_PASSWORD=VOTRE_PASSWORD_FORT_ICI  # ← Générez un mot de passe fort

# Options PostgreSQL
DB_TIMEZONE=UTC
DB_SCHEMA=public

# ============================================
# REDIS (Cache, Session, Queue)
# ============================================
REDIS_CLIENT=phpredis
REDIS_HOST=redis  # ← Nom du service Docker
REDIS_PASSWORD=null  # ← Ou définir un mot de passe
REDIS_PORT=6379
REDIS_DB=0

# ============================================
# CACHE CONFIGURATION
# ============================================
CACHE_DRIVER=redis
CACHE_PREFIX=leyinvest_prod_cache  # ← Préfixe unique

# ============================================
# SESSION CONFIGURATION
# ============================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120  # minutes
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_SECURE_COOKIE=true  # ← HTTPS only
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# ============================================
# QUEUE CONFIGURATION
# ============================================
QUEUE_CONNECTION=redis

# ============================================
# MAIL CONFIGURATION (Resend)
# ============================================
MAIL_MAILER=resend
MAIL_FROM_ADDRESS="noreply@leyinvest.com"  # ← Votre email
MAIL_FROM_NAME="${APP_NAME}"

# Resend API Key
RESEND_API_KEY=re_VOTRE_CLE_RESEND_ICI  # ← Clé API Resend

# Backup mail config (si besoin de SMTP)
# MAIL_HOST=smtp.resend.com
# MAIL_PORT=587
# MAIL_USERNAME=resend
# MAIL_PASSWORD=re_VOTRE_CLE_RESEND_ICI
# MAIL_ENCRYPTION=tls

# ============================================
# LOGGING
# ============================================
LOG_CHANNEL=stack
LOG_STACK=single
LOG_LEVEL=warning  # ← warning en prod (pas debug)
LOG_DEPRECATIONS_CHANNEL=null

# ============================================
# FILESYSTEM
# ============================================
FILESYSTEM_DISK=local  # ← Ou 's3' si vous utilisez S3

# AWS S3 (si utilisé)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=eu-west-3
# AWS_BUCKET=
# AWS_USE_PATH_STYLE_ENDPOINT=false

# ============================================
# BROADCASTING (si utilisé)
# ============================================
BROADCAST_CONNECTION=log  # ← Ou 'pusher' si vous utilisez Pusher
# BROADCAST_DRIVER=pusher
# PUSHER_APP_ID=
# PUSHER_APP_KEY=
# PUSHER_APP_SECRET=
# PUSHER_APP_CLUSTER=eu

# ============================================
# SECURITY & CORS
# ============================================
CORS_ALLOW_CREDENTIALS=true

# ============================================
# RATE LIMITING (Laravel 12.x)
# ============================================
# Limite par défaut : 60 requêtes/minute
RATE_LIMIT_PER_MINUTE=60

# ============================================
# BCRYPT ROUNDS
# ============================================
BCRYPT_ROUNDS=12  # ← Plus élevé = plus sécurisé mais plus lent

# ============================================
# MAINTENANCE MODE
# ============================================
APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# ============================================
# API KEYS & SERVICES EXTERNES
# ============================================

# Google Analytics (optionnel)
# GOOGLE_ANALYTICS_ID=

# Sentry (Error tracking - optionnel mais recommandé)
# SENTRY_LARAVEL_DSN=https://xxx@sentry.io/xxx

# Stripe (si vous utilisez les paiements)
# STRIPE_KEY=pk_live_xxx
# STRIPE_SECRET=sk_live_xxx
# STRIPE_WEBHOOK_SECRET=whsec_xxx

# ============================================
# PERFORMANCE & OPTIMIZATION
# ============================================

# PHP Settings (si nécessaire)
# PHP_MEMORY_LIMIT=256M
# PHP_MAX_EXECUTION_TIME=300
# PHP_UPLOAD_MAX_FILESIZE=50M
# PHP_POST_MAX_SIZE=50M

# ============================================
# BACKUP CONFIGURATION (si vous utilisez)
# ============================================
# BACKUP_DISK=s3
# BACKUP_NOTIFICATION_EMAIL=admin@leyinvest.com

# ============================================
# CUSTOM APP VARIABLES
# ============================================

# OTP Configuration
OTP_EXPIRATION_MINUTES=10
OTP_LENGTH=6

# API Rate Limits
API_RATE_LIMIT=100  # Requêtes par minute
API_RATE_LIMIT_AUTHENTICATED=200

# Features Flags
FEATURE_REGISTRATION_ENABLED=true
FEATURE_EMAIL_VERIFICATION_REQUIRED=true
FEATURE_TWO_FACTOR_ENABLED=false

# Business Logic
MAX_PORTFOLIO_SIZE=50
MAX_WATCHLIST_SIZE=100
PREMIUM_PLAN_PRICE=9.99
PRO_PLAN_PRICE=29.99

# ============================================
# MONITORING & ALERTS (optionnel)
# ============================================

# Slack Notifications (pour alertes)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx/yyy/zzz

# Email Admin pour alertes critiques
ADMIN_EMAIL=admin@leyinvest.com

# ============================================
# THIRD PARTY INTEGRATIONS
# ============================================

# API Externe (exemple : données financières)
# FINANCIAL_API_KEY=
# FINANCIAL_API_URL=https://api.example.com

# ============================================
# NOTES & DOCUMENTATION
# ============================================

# Variables à générer :
# - APP_KEY: php artisan key:generate
# - DB_PASSWORD: Générer un mot de passe fort (ex: openssl rand -base64 32)
# - RESEND_API_KEY: Depuis https://resend.com/api-keys

# Variables à vérifier :
# - APP_DOMAIN: Doit correspondre à votre domaine
# - FRONTEND_URL: URL de votre frontend
# - MAIL_FROM_ADDRESS: Email vérifié dans Resend

# Sécurité :
# - APP_DEBUG=false en production
# - SESSION_SECURE_COOKIE=true (HTTPS only)
# - LOG_LEVEL=warning (pas debug)
# - BCRYPT_ROUNDS=12 minimum
